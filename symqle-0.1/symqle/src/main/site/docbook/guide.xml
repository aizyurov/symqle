<?xml version="1.0"?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN" "http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd">
<book>
    <bookinfo>
        <title>Symqle guide</title>
          <author>
            <firstname>Alexander</firstname>
            <surname>Izyurov</surname>
          </author>
          <copyright>
            <year>2009-2013</year><holder>Alexander Izyurov</holder>
          </copyright>
    </bookinfo>
    <preface><title>Introduction</title>
    <para>
        Symqle is a collection of Java primitives for building SQL statements. Each Symqle interface corresponds to a
        symbol of SQL language. Nethods of Symqle objects represent grammar rules of the language. So, you build more
        complex objects from more simple ones until you get the final SelectStatement of DataChangeStatement, which can be executed.
    </para>
        <para>
            The starting point is Symqle model, which describes tables and columns. The model can be generated by Symqle modeler;
            it is also very easy to write the model from scratch. It looks like
            <programlisting>
public class Person extends Table {
    public Person() {
        super("person");
    }
    public Column&lt;Long&gt; id() { return createColumn(Mappers.LONG, "person_id"); }
    public Column&lt;String&gt; lastName() { return createColumn(Mappers.STRING, "last_name"); }
    ...
}
            </programlisting>
        </para>
        <para>
            Another basic object is Engine, which can execute queries. Typically you use DataSource-based Engine,
            you can construct it as
        <programlisting>
Engine engine = new ConnectorEngine(dataSource);
        </programlisting>
        </para>
        <para>
            Now you can construct and execute queries.
            Symqle classes typically implement multiple interfaces, so construction of "more complex" objects can be
            implicit. For example, Column class implements SelectStatement interface, so it has list(Engine, Option...) method.
            <programlisting>
                List&lt;String&gt; names = new Person().lastName().list(engine);
            </programlisting>
            would return what is expected: list of all last names from "person" table.
        </para>
        <para>
            More complex example, which illustrates how Symqle methods are applied to construct queries:
            <programlisting>
            Person person = new Person();
            List&lt;Pair&lt;Long, String&gt;&gt; personList = person.id()
                .pair(person.name())
                .where(person.name().like("J%"))
                .orderBy(person.id())
                .limit(10)
                .list(engine);
            </programlisting>
        </para>
        <para>
            Returned values are not limited to simple types and Pairs, you can easily convert result sets to any Java objects.
            See further chapters for full capabilities of Symqle.
        </para>
        <para>
            Symqle is not an Object-relation mapper. There are no objects, which correspond to database <emphasis>data</emphasis>.
            The objects produced by Symqle are typically simple DataTransferObjects.
        </para>
    </preface>
    <chapter><title>Building SELECT clause</title>
        <sect1>
            <title>Primary value expressions</title>
        </sect1>
        <sect1>
            <title>Arithmetic expressions</title>
        </sect1>
        <sect1>
            <title>String expressions</title>
        </sect1>
        <sect1>
            <title>Boolean expressions</title>
        </sect1>
        <sect1>
            <title>Subqueries</title>
        </sect1>
        <sect1>
            <title>Functions</title>
        </sect1>
        <sect1>
            <title>Selectors</title>
        </sect1>
        <sect1>
            <title>Cast and map</title>
        </sect1>
    </chapter>
    <chapter><title>Building WHERE clause</title>
        <sect1>
            <title>Predicates</title>
        </sect1>
        <sect1>
            <title>Boolean expressions</title>
        </sect1>
    </chapter>
    <chapter><title>FROM clause</title>
        <sect1>
            <title>How Symqle build FROM clause</title>
        </sect1>
    </chapter>
    <chapter><title>ORDER BY</title>
    </chapter>
    <chapter><title>Set operations</title>
    </chapter>
    <chapter><title>Building select statement</title>
        <sect1>
            <title>Offset and limit</title>
        </sect1>
        <sect1>
            <title>FOR UPDATE and FOR READ ONLY</title>
        </sect1>
        <sect1>
            <title>List and scroll</title>
        </sect1>
        <sect1>
            <title>Statement options</title>
        </sect1>
    </chapter>
    <chapter><title>Aggregate functions</title>
    </chapter>
    <chapter><title>Collections</title>
    </chapter>
    <chapter><title>Data change statements</title>
        <sect1>
            <title>Insert</title>
        </sect1>
        <sect1>
            <title>Update</title>
        </sect1>
    </chapter>
    <chapter><title>Collections</title>
    </chapter>
    <chapter><title>Symqle model</title>
        <sect1>
            <title>Using modeler</title>
        </sect1>
        <sect1>
            <title>Adaptors and generic Selectors</title>
        </sect1>
        <sect1>
            <title>Derived tables</title>
        </sect1>
    </chapter>
    <chapter><title>Transactions</title>
        <sect1>
            <title>TODO</title>
        </sect1>
    </chapter>
    <chapter><title>Extending Symqle</title>
        <sect1>
            <title>TODO</title>
        </sect1>
    </chapter>
    <chapter><title>Supported databases</title>
        <sect1>
            <title>TODO</title>
        </sect1>
    </chapter>
    <chapter><title>Performance</title>
        <sect1>
            <title>TODO</title>
        </sect1>
    </chapter>
</book>

